<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>Fiche de le√ßon Maths 6e ¬∑ Togo ¬∑ responsive</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-dark: #0b4d3a;
            --primary: #1b6e54;
            --primary-light: #d0f0e4;
            --accent: #f3b33d;
            --bg-light: #f0f8f5;
            --text: #1b4637;
            --white: #ffffff;
            --shadow: 0 10px 20px -8px rgba(0,40,20,0.25);
        }

        body {
            font-family: 'Inter', 'Segoe UI', Roboto, system-ui, sans-serif;
            background: var(--bg-light);
            color: var(--text);
            line-height: 1.5;
            padding: 1rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ===== BANDEAU RESPONSIVE ===== */
        .bandeau {
            background: linear-gradient(148deg, var(--primary-dark), var(--primary));
            color: white;
            border-radius: clamp(20px, 5vw, 40px);
            padding: clamp(1.2rem, 4vw, 2rem) clamp(1.5rem, 5vw, 2.8rem);
            margin-bottom: clamp(1.5rem, 4vw, 2.8rem);
            box-shadow: var(--shadow);
            width: 100%;
        }

        .bandeau h1 {
            font-size: clamp(1.1rem, 5vw, 1.9rem);
            font-weight: 600;
            line-height: 1.3;
            word-break: break-word;
        }

        .bandeau h2 {
            font-size: clamp(0.95rem, 4vw, 1.3rem);
            font-weight: 400;
            margin-top: 0.5rem;
        }

        .badge-prog {
            background: var(--accent);
            color: var(--primary-dark);
            font-weight: 800;
            padding: 0.4rem clamp(1rem, 3vw, 2.2rem);
            border-radius: 60px;
            display: inline-block;
            margin-top: 1rem;
            font-size: clamp(0.7rem, 3vw, 1rem);
            box-shadow: 0 4px 8px #b57f1a;
            white-space: normal;
            text-align: center;
        }

        /* ===== CARTE G√âN√âRATEUR RESPONSIVE ===== */
        .card-outil {
            background: var(--white);
            border-radius: clamp(20px, 5vw, 40px);
            padding: clamp(1.2rem, 4vw, 2.4rem) clamp(1.2rem, 4vw, 3rem);
            margin-bottom: clamp(1.8rem, 5vw, 2.8rem);
            border: 2px solid #c3e3d6;
            box-shadow: var(--shadow);
            width: 100%;
        }

        .card-outil h3 {
            font-size: clamp(1.3rem, 5vw, 2rem);
            color: var(--primary);
            border-bottom: 4px solid #c4ecd9;
            padding-bottom: 0.8rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            flex-wrap: wrap;
            word-break: break-word;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: flex-end;
        }

        .form-group {
            flex: 1 1 200px;
            min-width: 160px;
        }

        .form-group label {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
            display: block;
            font-size: clamp(0.85rem, 3vw, 1rem);
        }

        .form-group select, .form-group input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid #c6e2d7;
            border-radius: 50px;
            font-size: clamp(0.9rem, 3vw, 1rem);
            background: #f9fffd;
            transition: 0.2s;
        }

        .form-group select:focus, .form-group input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(27,110,84,0.2);
        }

        .btn-generer {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.9rem 1.5rem;
            border-radius: 60px;
            font-weight: 700;
            font-size: clamp(1.1rem, 4vw, 1.5rem);
            width: 100%;
            margin-top: 1.5rem;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 15px 25px -10px var(--primary);
            white-space: normal;
            line-height: 1.3;
        }

        .btn-generer:hover {
            background: #0f543f;
            transform: translateY(-2px);
        }

        /* ===== FICHE G√âN√âR√âE RESPONSIVE ===== */
        .fiche-finale {
            background: var(--white);
            border-radius: clamp(25px, 6vw, 60px);
            padding: clamp(1.2rem, 4vw, 3rem) clamp(1.2rem, 4vw, 3.5rem);
            border: 4px solid #a5d7c4;
            margin-top: 2rem;
            box-shadow: var(--shadow);
            width: 100%;
            overflow-x: hidden;
        }

        .hidden {
            display: none !important;
        }

        .fiche-header {
            text-align: center;
            border-bottom: 3px dashed var(--primary);
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }

        .fiche-header h2 {
            font-size: clamp(1.6rem, 6vw, 2.6rem);
            color: var(--primary);
            font-weight: 700;
            word-break: break-word;
        }

        /* sections guide */
        .section-guide {
            background: #f6fdfa;
            border-radius: clamp(18px, 4vw, 40px);
            padding: clamp(1rem, 3vw, 1.8rem) clamp(1.2rem, 4vw, 2.5rem);
            margin-bottom: 1.8rem;
            border-left: clamp(8px, 2vw, 16px) solid var(--primary);
            box-shadow: 0 6px 12px #c1ddd1;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .section-guide h4 {
            font-size: clamp(1.1rem, 4vw, 1.5rem);
            color: #1a5b45;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .badge-consigne {
            background: #fef7e5;
            border-left: clamp(4px, 1.5vw, 8px) solid var(--accent);
            padding: clamp(0.8rem, 2vw, 1.2rem) clamp(1rem, 3vw, 2rem);
            border-radius: 30px;
            font-size: clamp(0.9rem, 3vw, 1.05rem);
            margin: 1rem 0;
            box-shadow: 0 3px 8px #d9e6df;
            word-break: break-word;
        }

        .bullet-list {
            margin-left: 1.2rem;
            line-height: 1.6;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            padding-right: 0.5rem;
        }

        .bullet-list li {
            margin-bottom: 0.4rem;
            word-break: break-word;
        }

        /* tableau responsive */
        .table-cap {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 8px 16px #c4ddd1;
            margin-top: 1rem;
            font-size: clamp(0.8rem, 2.5vw, 0.95rem);
        }

        .table-cap th {
            background: var(--primary);
            color: white;
            font-weight: 600;
            padding: 10px 8px;
            text-align: left;
        }

        .table-cap td {
            border: 1px solid #b7dbc9;
            padding: 10px 8px;
            vertical-align: top;
            word-break: break-word;
        }

        /* actions */
        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 2rem;
            justify-content: center;
        }

        .btn-print {
            background: white;
            border: 2px solid var(--primary);
            border-radius: 60px;
            padding: 0.6rem 1.2rem;
            font-weight: 700;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            cursor: pointer;
            transition: 0.2s;
            min-width: 120px;
            flex: 1 0 auto;
            max-width: 200px;
            white-space: nowrap;
        }

        .btn-print:hover {
            background: #e2f3eb;
        }

        /* petite astuce pour les tr√®s petits √©crans */
        @media (max-width: 480px) {
            body { padding: 0.5rem; }
            .btn-print { white-space: normal; min-width: unset; flex-basis: 100%; }
            .form-group { flex-basis: 100%; }
        }

        @media print {
            .no-print, .card-outil, .actions { display: none !important; }
            .fiche-finale { border: none; box-shadow: none; padding: 1.2cm; }
            .section-guide { break-inside: avoid; }
        }
    </style>
</head>
<body>
<div class="container">
    <!-- BANDEAU OFFICIEL (responsive) -->
    <div class="bandeau no-print">
        <h1>üáπüá¨ MINIST√àRE DES ENSEIGNEMENTS PRIMAIRE ET SECONDAIRE</h1>
        <h2>R√âPUBLIQUE TOGOLAISE ‚Äì Travail-Libert√©-Patrie</h2>
        <div class="badge-prog">PROGRAMME MATH√âMATIQUES 6e ‚Äì GUIDE EX√âCUTION INT√âGRAL</div>
        <p style="margin-top:1rem; font-size:clamp(0.9rem,3vw,1.2rem);">Strat√©gies ¬∑ Consignes ¬∑ √âvaluation (conforme programme)</p>
    </div>

    <!-- G√âN√âRATEUR RESPONSIVE -->
    <div class="card-outil no-print">
        <h3>üìò G√âN√âRATEUR DE FICHE ‚Äì GUIDE EX√âCUTION</h3>
        <div class="form-row">
            <div class="form-group">
                <label>üìå Le√ßon</label>
                <select id="leconSelect">
                    <option value="">-- S√©lectionner --</option>
                    <optgroup label="‚öôÔ∏è Configurations espace">
                        <option value="cube-pave-droit">Cube, pav√© droit</option>
                    </optgroup>
                    <optgroup label="üìê Configurations plan">
                        <option value="droites">Droites</option>
                        <option value="segments">Segments</option>
                        <option value="angles">Angles</option>
                        <option value="triangles">Triangles</option>
                        <option value="cercles-disques">Cercles et disques</option>
                        <option value="parallelogrammes">Parall√©logrammes</option>
                    </optgroup>
                    <optgroup label="üîÑ Applications plan">
                        <option value="symetrie-droite">Sym√©trie / droite</option>
                        <option value="symetrie-point">Sym√©trie / point</option>
                    </optgroup>
                    <optgroup label="üßÆ Calcul num√©rique">
                        <option value="arithmetique">Arithm√©tique (entiers)</option>
                        <option value="nombres-decimaux">Nombres d√©cimaux</option>
                        <option value="programme-calcul">Programme de calcul</option>
                        <option value="fractions">Fractions</option>
                        <option value="nombres-relatifs">Nombres relatifs</option>
                    </optgroup>
                    <optgroup label="üìä Organisation donn√©es">
                        <option value="proportionnalite">Proportionnalit√©</option>
                        <option value="pourcentage-echelle">Pourcentage & √©chelle</option>
                    </optgroup>
                </select>
            </div>
            <div class="form-group">
                <label>‚è±Ô∏è Dur√©e</label>
                <input type="text" id="dureeField" value="6 heures" placeholder="ex: 6h">
            </div>
            <div class="form-group">
                <label>üìÖ Date</label>
                <input type="date" id="dateField">
            </div>
        </div>
        <button class="btn-generer" id="btnGenerer">‚ú® G√âN√âRER LA FICHE</button>
    </div>

    <!-- FICHE G√âN√âR√âE (contenu inchang√©) -->
    <div class="fiche-finale hidden" id="ficheGeneree">
        <div id="contenuFiche"></div>
        <div class="actions no-print">
            <button class="btn-print" onclick="window.print()">üñ®Ô∏è Imprimer</button>
            <button class="btn-print" onclick="alert('Imprimer ‚Üí Enregistrer en PDF')">üìÑ PDF</button>
            <button class="btn-print" onclick="exportWord()">üìù Word</button>
            <button class="btn-print" onclick="resetFiche()">üîÑ Nouvelle</button>
        </div>
        <div style="margin-top:1.5rem; background:#fdf3da; padding:0.8rem 1.5rem; border-radius:60px; font-size:clamp(0.8rem,2.5vw,0.95rem); text-align:center;" class="no-print">
            ‚ö° Guide d'ex√©cution complet : strat√©gies, consignes, √©valuation.
        </div>
    </div>
</div>

<script>
(function() {
    // ==================== CONTENU P√âDAGOGIQUE INT√âGRAL (STRICTEMENT IDENTIQUE) ====================
    const lecons = {
        'cube-pave-droit': {
            theme: 'Configurations de l\'espace',
            titre: 'Cube ‚Äì Pav√© droit',
            contenusSynth: ['Cube, pav√© droit : d√©finitions, vocabulaire (face, ar√™te, sommet)', 'Patron d‚Äôun cube, d‚Äôun pav√© droit', 'Aire lat√©rale, aire totale, volume'],
            strategies: ['Travail individuel ou en petits groupes ‚Äì observation r√©elle du solide', 'D√©couverte des diff√©rentes parties du cube et du pav√© droit : face (forme, nombre), ar√™te (nombre), sommet (nombre), surface lat√©rale, bases', 'Travail en petits groupes : d√©couverte du patron (d√©faire le solide) ; puis construction individuelle √† partir du patron'],
            consignes: ['Mettre la classe en situation d‚Äôobservation r√©elle du solide (pr√©voir le mat√©riel individuel et collectif)', 'Faire distinguer et nommer par les √©l√®ves les diff√©rentes parties du solide', 'D√©faire le solide et faire d√©couvrir le patron obtenu ; pr√©senter √©ventuellement d‚Äôautres formes de patron', 'Veiller √† ce que chaque apprenant r√©alise personnellement le solide'],
            evaluation: ['Reconnaissance du cube, du pav√© droit dans un groupe de solides', 'D√©signation par leurs noms des diff√©rentes parties du solide', 'Construction du patron et r√©alisation du solide', 'Calcul des grandeurs (aire lat√©rale, aire totale, volume) par application des formules'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre/Identifier un solide', contenu: 'Cube, Pav√© droit : d√©finitions, vocabulaire, caract√©ristiques' },
                { capacite: 'D√©crire un solide', contenu: 'Vocabulaire : face, ar√™te, sommet, surface lat√©rale, bases' },
                { capacite: 'Construire le patron d‚Äôun solide', contenu: 'Patron d‚Äôun cube, d‚Äôun pav√© droit' },
                { capacite: 'R√©aliser le solide √† partir du patron', contenu: 'Cube, pav√© droit, patrons' },
                { capacite: 'Calculer des grandeurs', contenu: 'Aire lat√©rale, aire totale, volume d‚Äôun cube, d‚Äôun pav√© droit' }
            ],
            prerequis: ['Formes g√©om√©triques de base', 'Notions de g√©om√©trie dans l‚Äôespace'],
            materiel: ['Mod√®les de cubes et pav√©s droits en 3D', 'Papier cartonn√©, ciseaux, colle', 'R√®gle, √©querre, compas']
        },
        'droites': {
            theme: 'Configurations du plan',
            titre: 'Droites',
            contenusSynth: ['Droites et points align√©s, demi-droites', 'Droites s√©cantes, perpendiculaires, parall√®les', 'Notation : droites, demi-droites, droites perpendiculaires, parall√®les'],
            strategies: ['Observation et manipulation en petits groupes', 'M√©thode d√©monstrative ; faire faire', 'Renforcement et clarification des notions d√©j√† install√©es au primaire'],
            consignes: ['Renforcer et clarifier les notions d√©j√† install√©es au primaire', 'Faire nommer des configurations', 'Travailler √† la ma√Ætrise des instruments de g√©om√©trie par les apprenants'],
            evaluation: ['Identification d‚Äôune configuration : droites et points align√©s, demi-droites, droites s√©cantes, perpendiculaires, parall√®les', 'Reconnaissance de la position relative d‚Äôune droite par rapport √† une autre', 'Utilisation du vocabulaire appropri√© pour d√©crire des configurations', 'Construction/reproduction de configurations (pr√©vues dans les contenus)'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre/Identifier', contenu: 'Droites et points align√©s, demi-droites, droites s√©cantes, perpendiculaires, parall√®les' },
                { capacite: 'Nommer', contenu: 'Notation : droites, demi-droites, droites perpendiculaires, parall√®les' },
                { capacite: 'Construire/Reproduire', contenu: 'Droites et points align√©s, demi-droites, droites s√©cantes, perpendiculaires, parall√®les' },
                { capacite: 'Justifier', contenu: 'Appartenance (‚àà,‚àâ), perpendicularit√©, parall√©lisme ‚Äì propri√©t√©s' }
            ],
            prerequis: ['Notions de base en g√©om√©trie', 'Utilisation des instruments'],
            materiel: ['R√®gles, √©querres, compas', 'Papier quadrill√©']
        },
        'segments': {
            theme: 'Configurations du plan',
            titre: 'Segments',
            contenusSynth: ['D√©finition : segment, support, milieu, longueur, distance de deux points, m√©diatrice'],
            strategies: ['Observation et manipulation en petits groupes', 'M√©thode d√©monstrative ; faire faire', 'Recours aux d√©finitions et propri√©t√©s pour justifier'],
            consignes: ['Renforcer et clarifier les notions d√©j√† install√©es au primaire', 'Faire nommer des segments, le support d‚Äôun segment', 'Faire d√©couvrir la propri√©t√© de la m√©diatrice : ¬´ Les deux segments liant un point de la m√©diatrice √† ses extr√©mit√©s ont m√™me longueur ¬ª', 'Travailler √† la ma√Ætrise des instruments (r√®gle gradu√©e, √©querre, compas)'],
            evaluation: ['Identification : segments, support d‚Äôun segment, milieu, m√©diatrice', 'Utilisation du vocabulaire appropri√© pour d√©crire des configurations', 'Mesure et comparaison de grandeurs (longueur d‚Äôun segment, distance de deux points)', 'Construction du milieu (r√®gle gradu√©e) et de la m√©diatrice (r√®gle + √©querre)'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre/Identifier', contenu: 'Segments, support d‚Äôun segment, milieu, longueur, distance de deux points, m√©diatrice' },
                { capacite: 'Nommer', contenu: 'Segments et notations' },
                { capacite: 'Mesurer/Comparer', contenu: 'Longueur d‚Äôun segment, distance de deux points' },
                { capacite: 'Construire/Reproduire', contenu: 'Segments, support, milieu (r√®gle gradu√©e), m√©diatrice (r√®gle+√©querre)' },
                { capacite: 'Justifier', contenu: '√âgalit√© de distances (point de la m√©diatrice √©quidistant), point milieu, droite m√©diatrice' }
            ],
            prerequis: ['Droites, points'],
            materiel: ['R√®gles gradu√©es, √©querres, compas']
        },
        'angles': {
            theme: 'Configurations du plan',
            titre: 'Angles',
            contenusSynth: ['Angle, angles particuliers (plat, droit, nul), angles adjacents', 'Bissectrice d‚Äôun angle'],
            strategies: ['Observation et manipulation en petits groupes', 'Travail individuel (mesure avec rapporteur)', 'M√©thode d√©monstrative ; faire faire'],
            consignes: ['Renforcer et clarifier les notions d‚Äôangles d√©j√† install√©es au primaire', 'Faire nommer des angles', 'Travailler √† la ma√Ætrise du rapporteur'],
            evaluation: ['Identification d‚Äôangles, d‚Äôangles adjacents, de la bissectrice', 'Mesure et comparaison des grandeurs', 'Calcul de mesures d‚Äôangles dans une configuration d‚Äôangles adjacents', 'Construction/reproduction d‚Äôangles, d‚Äôangles particuliers, de la bissectrice'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre/Identifier', contenu: 'Angle, angles particuliers (plat, droit, nul), angles adjacents, bissectrice' },
                { capacite: 'Nommer', contenu: 'Vocabulaire et notation : angle, angles particuliers' },
                { capacite: 'Mesurer/Comparer', contenu: 'Mesure d‚Äôun angle, utilisation du rapporteur ; angles aigu, obtus, plat, droit, nul' },
                { capacite: 'Calculer', contenu: 'Mesures d‚Äôangles dans une configuration d‚Äôangles adjacents' },
                { capacite: 'Construire/Reproduire', contenu: 'Angles, angles particuliers, adjacents, bissectrice' },
                { capacite: 'Justifier', contenu: 'Droite bissectrice d‚Äôun angle (utilisation de la d√©finition)' }
            ],
            prerequis: ['Segments', 'Utilisation du rapporteur'],
            materiel: ['Rapporteurs, r√®gles, compas']
        },
        'triangles': {
            theme: 'Configurations du plan',
            titre: 'Triangles',
            contenusSynth: ['Triangles : c√¥t√© oppos√©, sommet', 'Triangles particuliers : rectangle, isoc√®le, √©quilat√©ral', 'Droites particuli√®res : hauteur, m√©diatrice, bissectrice, m√©diane'],
            strategies: ['Observation et manipulation en petits groupes', 'M√©thode d√©monstrative ; faire faire'],
            consignes: ['Renforcer et clarifier les notions de triangles d√©j√† install√©es au primaire', 'Faire nommer des triangles et des droites particuli√®res d‚Äôun triangle'],
            evaluation: ['Identification de triangles, c√¥t√©s oppos√©s, sommets', 'Identification de droites particuli√®res d‚Äôun triangle', 'Calcul de grandeurs : p√©rim√®tre, aire d‚Äôun triangle', 'Construction/reproduction de triangles, triangles particuliers, droites particuli√®res'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre/Identifier', contenu: 'Triangles : c√¥t√© oppos√©, sommet ; triangles particuliers (rectangle, isoc√®le, √©quilat√©ral) ; hauteur, m√©diatrice, bissectrice, m√©diane' },
                { capacite: 'Nommer', contenu: 'Vocabulaire : triangles, triangles particuliers, droites particuli√®res' },
                { capacite: 'Construire/Reproduire', contenu: 'Triangles (connaissant mesures de c√¥t√©s/angles sans somme des angles), triangles particuliers, droites particuli√®res' },
                { capacite: 'Calculer', contenu: 'P√©rim√®tre, aire d‚Äôun triangle' },
                { capacite: 'Justifier', contenu: 'Nature d‚Äôun triangle (rectangle, isoc√®le, √©quilat√©ral) ; nature d‚Äôune droite (hauteur, m√©diatrice, bissectrice, m√©diane)' }
            ],
            prerequis: ['Angles, segments'],
            materiel: ['R√®gle, √©querre, compas, rapporteur']
        },
        'cercles-disques': {
            theme: 'Configurations du plan',
            titre: 'Cercles et disques',
            contenusSynth: ['Cercle : pr√©sentation, vocabulaire, √©l√©ments caract√©ristiques (centre, rayon, diam√®tre)', 'Cordes, arcs de cercle, demi-cercles', 'Disque'],
            strategies: ['Observation et manipulation en petits groupes', 'M√©thode d√©monstrative ; faire faire'],
            consignes: ['Renforcer et clarifier les notions relatives au cercle d√©j√† install√©es au primaire', 'Faire nommer : cercles, demi-cercles, disques, centres, rayons, cordes, arcs'],
            evaluation: ['Identification : cercles, disques, √©l√©ments caract√©ristiques, cordes, arcs', 'Calcul de grandeurs : p√©rim√®tre du cercle, aire du disque', 'Construction/reproduction de cercles, disques, cordes, arcs, demi-cercles'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre/Identifier', contenu: 'Cercle : pr√©sentation, vocabulaire, √©l√©ments caract√©ristiques ; cordes, arcs, demi-cercles ; disque' },
                { capacite: 'Nommer', contenu: 'Vocabulaire : cercle, disque, cordes, arcs, demi-cercles' },
                { capacite: 'Calculer', contenu: 'P√©rim√®tre (longueur) du cercle, aire du disque' },
                { capacite: 'Construire/Reproduire', contenu: 'Cercle (connaissant centre/rayon, diam√®tre), disque, cordes, arcs, demi-cercles' },
                { capacite: 'Justifier', contenu: 'Appartenance d‚Äôun point √† un cercle, propri√©t√©s' }
            ],
            prerequis: ['Compas, longueurs'],
            materiel: ['Compas, r√®gle']
        },
        'parallelogrammes': {
            theme: 'Configurations du plan',
            titre: 'Parall√©logrammes',
            contenusSynth: ['Parall√©logramme : d√©finitions, vocabulaire (c√¥t√©, diagonale, sommet, centre)', 'Parall√©logrammes particuliers : losange, rectangle, carr√©'],
            strategies: ['Observation et manipulation en petits groupes', 'M√©thode d√©monstrative ; faire faire'],
            consignes: ['Renforcer et clarifier les notions relatives au parall√©logramme d√©j√† install√©es au primaire', 'Faire nommer les √©l√©ments'],
            evaluation: ['Identification de parall√©logrammes et parall√©logrammes particuliers', 'Utilisation du vocabulaire (c√¥t√©, diagonale, centre)', 'Calcul de grandeurs : p√©rim√®tre, aire', 'Construction du parall√©logramme, diagonale, centre, quatri√®me sommet'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre/Identifier', contenu: 'Parall√©logramme : d√©finitions, vocabulaire (c√¥t√©, diagonale, sommet, centre) ; parall√©logrammes particuliers : losange, rectangle, carr√©' },
                { capacite: 'Nommer', contenu: 'Vocabulaire : parall√©logramme, c√¥t√©, diagonale, sommet, centre ; losange, rectangle, carr√©' },
                { capacite: 'Construire/Reproduire', contenu: 'Parall√©logramme, diagonale, centre ; parall√©logrammes particuliers ; quatri√®me sommet (r√®gle+√©querre ou compas)' },
                { capacite: 'Calculer', contenu: 'P√©rim√®tre et aire d‚Äôun parall√©logramme' },
                { capacite: 'Justifier', contenu: 'La nature d‚Äôun quadrilat√®re (parall√©logramme, parall√©logrammes particuliers), propri√©t√©s' }
            ],
            prerequis: ['Parall√©lisme'],
            materiel: ['R√®gle, √©querre, compas']
        },
        'symetrie-droite': {
            theme: 'Applications du plan',
            titre: 'Sym√©trie par rapport √† une droite',
            contenusSynth: ['Figures sym√©triques par rapport √† une droite', 'Points sym√©triques, axe de sym√©trie'],
            strategies: ['Observation et manipulation en petits groupes', 'M√©thode d√©monstrative ; faire faire'],
            consignes: ['Renforcer et clarifier les notions relatives aux figures sym√©triques vues au primaire'],
            evaluation: ['Identification de points et figures sym√©triques par rapport √† une droite', 'Identification d‚Äôaxes de sym√©trie', 'Mesure et comparaison : propri√©t√©s de conservation des distances et des mesures d‚Äôangles', 'Construction de points sym√©triques, de figures sym√©triques (segments, droites, angles, cercles)'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre des figures ou points sym√©triques', contenu: 'Figures sym√©triques par rapport √† une droite ; points sym√©triques' },
                { capacite: 'Reconna√Ætre un axe de sym√©trie', contenu: 'Axe de sym√©trie' },
                { capacite: 'Nommer', contenu: 'Vocabulaire : figures sym√©triques, axe de sym√©trie' },
                { capacite: 'Construire des figures ou points sym√©triques', contenu: 'Points sym√©triques par rapport √† une droite ; figures sym√©triques (segments, droites, angles, cercles)' },
                { capacite: 'Construire un axe de sym√©trie', contenu: 'Axe de sym√©trie' },
                { capacite: 'Comparer des grandeurs', contenu: 'Propri√©t√©s de conservation des distances et des mesures d‚Äôangles' },
                { capacite: 'Justifier', contenu: 'Alignement, √©galit√© de distances, √©galit√© angulaire (conservation)' }
            ],
            prerequis: ['Perpendicularit√©, milieu'],
            materiel: ['Papier calque, r√®gle, √©querre, compas']
        },
        'symetrie-point': {
            theme: 'Applications du plan',
            titre: 'Sym√©trie par rapport √† un point',
            contenusSynth: ['Figures sym√©triques par rapport √† un point', 'Points sym√©triques, centre de sym√©trie'],
            strategies: ['Observation et manipulation en petits groupes', 'M√©thode d√©monstrative ; faire faire'],
            consignes: ['Renforcer et clarifier les notions relatives aux figures sym√©triques par rapport √† un point'],
            evaluation: ['Reconnaissance de points et figures sym√©triques par rapport √† un point', 'Identification de centre de sym√©trie', 'Construction de points sym√©triques, de figures sym√©triques (segments, droites, angles, cercles)', 'Conservation des distances et des angles'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre des figures ou points sym√©triques', contenu: 'Figures sym√©triques par rapport √† un point ; points sym√©triques' },
                { capacite: 'Reconna√Ætre un centre de sym√©trie', contenu: 'Centre de sym√©trie' },
                { capacite: 'Nommer', contenu: 'Vocabulaire : figures sym√©triques, centre de sym√©trie' },
                { capacite: 'Construire des figures ou points sym√©triques', contenu: 'Points sym√©triques par rapport √† un point ; figures sym√©triques (segments, droites, angles, cercles)' },
                { capacite: 'Construire un centre de sym√©trie', contenu: 'Centre de sym√©trie' },
                { capacite: 'Comparer des grandeurs', contenu: 'Propri√©t√©s de conservation des distances et des mesures d‚Äôangles' },
                { capacite: 'Justifier', contenu: 'Alignement, √©galit√© de distances, √©galit√© angulaire (conservation)' }
            ],
            prerequis: ['Milieu d‚Äôun segment'],
            materiel: ['R√®gle, compas, papier calque']
        },
        'arithmetique': {
            theme: 'Calcul num√©rique',
            titre: 'Arithm√©tique ‚Äì Nombres entiers naturels',
            contenusSynth: ['Ensemble IN, num√©ration, √©critures en chiffres/lettres', 'Comparaison, ordre de grandeur', 'Op√©rations (+, ‚Äì, √ó, √∑), vocabulaire : somme, terme, diff√©rence, produit, facteur', 'Multiples, diviseurs, crit√®res de divisibilit√© (2,5,3,9,10,100‚Ä¶)'],
            strategies: ['Observation et manipulation de nombres (petits groupes)', 'M√©thode d√©monstrative ; faire faire', 'Cr√©ation de situations faisant appel aux op√©rations sur les nombres entiers'],
            consignes: ['Pr√©senter une liste de nombres ou une situation faisant appel aux nombres et y faire identifier les nombres entiers naturels', 'Introduire la notion d‚Äôensemble : IN, symbole d‚Äôappartenance (‚àà, ‚àâ)', 'Faire lire et √©crire individuellement des nombres entiers naturels', 'Faire utiliser le vocabulaire appropri√©'],
            evaluation: ['Identification de nombres entiers naturels', '√âcritures en chiffres et en lettres de nombres entiers naturels', 'Comparaison, rangement par ordre croissant/d√©croissant', 'D√©termination de l‚Äôordre de grandeur', 'Op√©rations sur les nombres entiers naturels (addition, soustraction, multiplication, division)', 'D√©termination de multiples / diviseurs, utilisation des crit√®res de divisibilit√©'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre un nombre entier naturel', contenu: 'Ensemble IN des entiers naturels : vocabulaire et notations' },
                { capacite: 'Lire des nombres', contenu: 'R√®gles de num√©ration, tableau de num√©ration ; √©critures en chiffres, en lettres' },
                { capacite: '√âcrire des nombres', contenu: '√âcritures en chiffres, en lettres d‚Äôun nombre entier naturel' },
                { capacite: 'Comparer des nombres', contenu: 'R√®gles de comparaison, ordre croissant/d√©croissant, ordre de grandeur' },
                { capacite: 'Calculer', contenu: 'Op√©rations (+, ‚Äì, √ó, √∑) sur les entiers naturels ; vocabulaire : somme, terme, diff√©rence, produit, facteur ; multiples, diviseurs ; crit√®res de divisibilit√© par 2,5,3,9,10,100‚Ä¶' },
                { capacite: 'Justifier', contenu: 'Multiples, diviseurs d‚Äôun nombre entier naturel' }
            ],
            prerequis: ['Tables de multiplication'],
            materiel: ['Tableau de num√©ration', 'Fiches d‚Äôexercices']
        },
        'nombres-decimaux': {
            theme: 'Calcul num√©rique',
            titre: 'Nombres d√©cimaux',
            contenusSynth: ['Ensemble D, partie enti√®re/d√©cimale, dixi√®me, centi√®me, milli√®me‚Ä¶', 'Demi-droite gradu√©e, abscisse', 'Comparaison, encadrement, ordre de grandeur', 'Op√©rations (+, ‚Äì, √ó, √∑) sur les nombres d√©cimaux'],
            strategies: ['Observation et manipulation de nombres (petits groupes)', 'M√©thode d√©monstrative ; faire faire', 'Cr√©ation de situations faisant appel aux op√©rations sur les nombres d√©cimaux'],
            consignes: ['Pr√©senter une liste de nombres ou une situation et y faire identifier les nombres d√©cimaux', 'Faire correspondre des nombres √©crits en chiffres et en lettres (appariement)', 'Faire lire et √©crire individuellement des nombres d√©cimaux'],
            evaluation: ['Identification de nombres d√©cimaux', '√âcritures en lettres et en chiffres', 'Comparaison, encadrement, rep√©rage sur demi-droite gradu√©e', 'Op√©rations sur les nombres d√©cimaux'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre un nombre d√©cimal', contenu: 'Ensemble D des nombres d√©cimaux arithm√©tiques' },
                { capacite: 'Lire des nombres', contenu: 'Partie enti√®re, partie d√©cimale ; unit√©s, dixi√®me, centi√®me, milli√®me ; nombre de dixi√®mes/centi√®mes‚Ä¶' },
                { capacite: '√âcrire des nombres', contenu: '√âcritures en chiffres, en lettres d‚Äôun nombre d√©cimal' },
                { capacite: 'Rep√©rer un point sur une demi-droite', contenu: 'Demi-droite gradu√©e, abscisse' },
                { capacite: 'Comparer / Encadrer', contenu: 'R√®gles de comparaison, ordre croissant/d√©croissant ; encadrement par deux entiers cons√©cutifs, par deux d√©cimaux d‚Äôordre 1,2,3 ; ordre de grandeur' },
                { capacite: 'Calculer', contenu: 'Op√©rations (+, ‚Äì, √ó, √∑) sur les nombres d√©cimaux' }
            ],
            prerequis: ['Fractions d√©cimales'],
            materiel: ['R√®gle gradu√©e']
        },
        'programme-calcul': {
            theme: 'Calcul num√©rique',
            titre: 'Programme de calcul',
            contenusSynth: ['Propri√©t√©s de l‚Äôaddition/multiplication, r√®gles de priorit√©, parenth√®ses', 'Initiation au calcul litt√©ral (aires, volumes)'],
            strategies: ['Travail en petits groupes', 'Cr√©ation de situations faisant appel aux op√©rations'],
            consignes: ['Faire appliquer les propri√©t√©s d‚Äôaddition et de multiplication (r√®gles de priorit√©, utilisation des parenth√®ses)'],
            evaluation: ['Respect des priorit√©s op√©ratoires', 'Utilisation correcte des parenth√®ses'],
            capacitesDetails: [
                { capacite: 'Calculer en utilisant les propri√©t√©s', contenu: 'Propri√©t√©s de l‚Äôaddition, multiplication, r√®gles de priorit√©, utilisation des parenth√®ses' },
                { capacite: 'Effectuer du calcul litt√©ral', contenu: 'Initiation au calcul litt√©ral : calculs d‚Äôaires, de volumes' }
            ],
            prerequis: ['Op√©rations'],
            materiel: ['Fiches d‚Äôexercices']
        },
        'fractions': {
            theme: 'Calcul num√©rique',
            titre: 'Fractions',
            contenusSynth: ['√âcriture a/b (a,b entiers naturels, b‚â†0)', 'Fractions d√©cimales (b=10,100‚Ä¶)', 'Fractions √©gales', 'Comparaison de fractions de m√™me d√©nominateur', 'Simplification, somme/diff√©rence (m√™me d√©nominateur ou d√©nominateurs distincts), produit d‚Äôun entier par une fraction'],
            strategies: ['Observation et manipulation de nombres (petits groupes)', 'M√©thode d√©monstrative ; faire faire', 'Cr√©ation de situations faisant appel aux fractions'],
            consignes: ['Pr√©senter une situation faisant appel aux fractions', 'Faire d√©couvrir les r√®gles de comparaison (fractions ayant m√™me d√©nominateur)'],
            evaluation: ['Identification de fractions', 'Comparaison de fractions de m√™me d√©nominateur', 'Simplification, somme, diff√©rence, produit d‚Äôun entier par une fraction'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre une fraction', contenu: '√âcriture a/b (a,b entiers naturels, b‚â†0) ; √©criture fractionnaire d‚Äôun nombre d√©cimal (b=10,100‚Ä¶) ; fractions √©gales' },
                { capacite: 'Lire et √©crire une fraction', contenu: 'Num√©rateur, d√©nominateur' },
                { capacite: 'Comparer des nombres', contenu: 'Comparaison de deux fractions de m√™me d√©nominateur' },
                { capacite: 'Calculer', contenu: 'Simplification ; somme/diff√©rence (m√™me d√©nominateur ou d√©nominateurs distincts) ; produit d‚Äôun entier par une fraction' }
            ],
            prerequis: ['Division'],
            materiel: ['Mat√©riel de partage (bandes fractionn√©es)']
        },
        'nombres-relatifs': {
            theme: 'Calcul num√©rique',
            titre: 'Nombres d√©cimaux relatifs',
            contenusSynth: ['Ensemble ID des d√©cimaux relatifs, ensemble ‚Ñ§ des entiers relatifs', 'Vocabulaire, conventions d‚Äô√©criture', 'Droite gradu√©e, abscisse', 'Somme de deux relatifs (entiers ou d√©cimaux)'],
            strategies: ['Observation et manipulation de nombres (petits groupes)', 'Exploitation de frises chronologiques (axe du temps)', 'Cr√©ation de situations faisant appel √† l‚Äôaddition des nombres d√©cimaux'],
            consignes: ['Partir de situations de la vie courante (temp√©rature, dette) pour introduire les nombres d√©cimaux relatifs', 'Faire lire et √©crire individuellement des nombres d√©cimaux relatifs', '√âviter la formalisation par des r√®gles de calcul (sera vu en 5e)'],
            evaluation: ['Identification de nombres d√©cimaux relatifs', 'Lecture d‚Äôabscisse sur une droite gradu√©e', 'Somme de deux nombres d√©cimaux relatifs (utilisation concr√®te)'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre un nombre d√©cimal relatif', contenu: 'Ensemble ID des d√©cimaux relatifs, ensemble ‚Ñ§ des entiers relatifs' },
                { capacite: 'Lire et √©crire des nombres', contenu: 'Vocabulaire et notations ; convention d‚Äô√©critures' },
                { capacite: 'Rep√©rer un point sur une droite', contenu: 'Droite gradu√©e, abscisse' },
                { capacite: 'Calculer', contenu: 'Somme de deux entiers relatifs, de deux d√©cimaux relatifs ; utilisation des propri√©t√©s' },
                { capacite: 'Justifier', contenu: 'Appartenance d‚Äôun nombre √† un ensemble (IN, ‚Ñ§, D, ID)' }
            ],
            prerequis: ['Rep√©rage sur une droite'],
            materiel: ['Frise chronologique', 'Thermom√®tre']
        },
        'proportionnalite': {
            theme: 'Organisation des donn√©es',
            titre: 'Situations de proportionnalit√©',
            contenusSynth: ['Tableau de proportionnalit√©, coefficient', 'Propri√©t√©s de lin√©arit√©'],
            strategies: ['Observation et manipulation de situations et tableaux de proportionnalit√©', 'Mise en √©vidence de diff√©rentes m√©thodes √† travers la r√©solution d‚Äôexercices'],
            consignes: ['Partir de situations de la vie courante pour introduire des situations et tableaux de proportionnalit√©', 'Renforcer et clarifier la notion de pourcentage d√©j√† abord√©e au primaire'],
            evaluation: ['Identification de situations et tableaux de proportionnalit√©', 'D√©termination d‚Äôun tableau de proportionnalit√©', 'D√©termination du coefficient', 'Calcul d‚Äôune quatri√®me proportionnelle par diverses m√©thodes'],
            capacitesDetails: [
                { capacite: 'Reconna√Ætre une situation de proportionnalit√©', contenu: 'Tableau de proportionnalit√©, coefficient' },
                { capacite: 'Reconna√Ætre un tableau de proportionnalit√©', contenu: 'Propri√©t√©s de lin√©arit√©' },
                { capacite: 'Calculer des grandeurs', contenu: 'Utilisation du coefficient, propri√©t√©s de lin√©arit√©' },
                { capacite: 'Traduire un probl√®me', contenu: 'Situations de proportionnalit√© de la vie courante' }
            ],
            prerequis: ['Op√©rations'],
            materiel: ['Tableaux √† double entr√©e']
        },
        'pourcentage-echelle': {
            theme: 'Organisation des donn√©es',
            titre: 'Pourcentage et √©chelle',
            contenusSynth: ['Notion de pourcentage, calcul de pourcentages', 'Agrandissement/r√©duction √† l‚Äôaide d‚Äôune √©chelle'],
            strategies: ['Observation et manipulation de situations utilisant les pourcentages, les √©chelles'],
            consignes: ['Partir de situations de la vie courante pour calculer ou utiliser des pourcentages, des √©chelles'],
            evaluation: ['Calcul de pourcentages', 'D√©termination d‚Äô√©chelle', 'Reproduction de figures √† une √©chelle donn√©e'],
            capacitesDetails: [
                { capacite: 'Calculer des grandeurs √† l‚Äôaide des pourcentages', contenu: 'Propri√©t√©s des tableaux, pourcentages' },
                { capacite: 'D√©terminer l‚Äô√©chelle utilis√©e', contenu: 'Agrandissement/r√©duction √† l‚Äôaide d‚Äôune √©chelle' },
                { capacite: 'Reproduire un dessin √† une √©chelle donn√©e', contenu: 'Utilisation de l‚Äô√©chelle' }
            ],
            prerequis: ['Proportionnalit√©'],
            materiel: ['Cartes g√©ographiques, plans']
        }
    };

    // -------------------- LOGIQUE D'AFFICHAGE (inchang√©e) --------------------
    const select = document.getElementById('leconSelect');
    const dureeInput = document.getElementById('dureeField');
    const dateInput = document.getElementById('dateField');
    const btn = document.getElementById('btnGenerer');
    const ficheDiv = document.getElementById('ficheGeneree');
    const contenuFiche = document.getElementById('contenuFiche');

    const today = new Date().toISOString().split('T')[0];
    dateInput.value = today;

    select.addEventListener('change', function() {
        if (lecons[this.value]) dureeInput.value = '6 heures';
    });

    function generer() {
        const id = select.value;
        if (!id || !lecons[id]) { alert('Veuillez s√©lectionner une le√ßon.'); return; }
        const lec = lecons[id];
        const duree = dureeInput.value || '6 heures';
        const date = dateInput.value ? new Date(dateInput.value).toLocaleDateString('fr-FR') : '√Ä d√©terminer';

        const contenuItems = lec.contenusSynth.map(c => `<li>${c}</li>`).join('');
        const stratItems = lec.strategies.map(s => `<li>${s}</li>`).join('');
        const consignesDiv = lec.consignes.map(c => `<div class="badge-consigne">üì£ ${c}</div>`).join('');
        const evalItems = lec.evaluation.map(e => `<li>${e}</li>`).join('');
        const capRows = lec.capacitesDetails.map(item => 
            `<tr><td style="font-weight:600; width:35%;">${item.capacite}</td><td>${item.contenu}</td></tr>`
        ).join('');

        const html = `
            <div class="fiche-header">
                <h2>${lec.titre}</h2>
                <p style="font-size:clamp(0.9rem,2.5vw,1.15rem);">Th√®me : ${lec.theme} ‚Äî Dur√©e : ${duree} ‚Äî Date : ${date}</p>
            </div>
            <div class="section-guide"><h4>üìã CONTENUS (synth√®se)</h4><ul class="bullet-list">${contenuItems}</ul></div>
            <div class="section-guide"><h4>üß† STRAT√âGIES</h4><ul class="bullet-list">${stratItems}</ul></div>
            <div class="section-guide"><h4>üó£Ô∏è CONSIGNES</h4>${consignesDiv}</div>
            <div class="section-guide"><h4>‚úÖ √âVALUATION</h4><ul class="bullet-list">${evalItems}</ul></div>
            <div class="section-guide"><h4>üîé CAPACIT√âS & CONTENUS</h4>
                <table class="table-cap"><tr><th>Capacit√©</th><th>Contenu</th></tr>${capRows}</table>
            </div>
            <div class="section-guide"><h4>üì¶ PR√âREQUIS & MAT√âRIEL</h4>
                <p><strong>Pr√©requis :</strong> ${lec.prerequis.join(', ')}</p>
                <p><strong>Mat√©riel :</strong> ${lec.materiel.join(' ¬∑ ')}</p>
            </div>
        `;
        contenuFiche.innerHTML = html;
        ficheDiv.classList.remove('hidden');
        ficheDiv.scrollIntoView({ behavior: 'smooth' });
    }

    btn.addEventListener('click', generer);
    document.addEventListener('keydown', (e) => { if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') generer(); });

    window.exportWord = function() {
        if (ficheDiv.classList.contains('hidden')) return alert('G√©n√©rez d‚Äôabord une fiche.');
        const content = contenuFiche.innerHTML;
        const style = '<style>body { font-family: Arial; margin: 2cm; } .section-guide { margin-bottom:20px; } .table-cap { border-collapse: collapse; width:100%; } .table-cap td, .table-cap th { border:1px solid #aaa; padding:8px; } .badge-consigne { background:#fef7e5; padding:10px; border-left:6px solid #f3b33d; }</style>';
        const full = `<!DOCTYPE html><html><head><meta charset="UTF-8">${style}</head><body>${content}</body></html>`;
        const blob = new Blob([full], {type: 'application/msword'});
        const link = document.createElement('a'); link.href = URL.createObjectURL(blob); link.download = 'Fiche_guide_6e.doc'; link.click();
    };
    window.resetFiche = function() {
        ficheDiv.classList.add('hidden');
        select.value = '';
        dureeInput.value = '6 heures';
        dateInput.value = today;
    };
})();
</script>
</body>
</html>
